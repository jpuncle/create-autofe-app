(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{220:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"静态资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态资源"}},[s._v("#")]),s._v(" 静态资源")]),s._v(" "),a("p",[s._v("静态资源可以通过如下方式进行处理：")]),s._v(" "),a("ul",[a("li",[s._v("在 JavaScript 被导入或 CSS 中通过相对路径被引用。这类引用会被 webpack 处理；")]),s._v(" "),a("li",[s._v("其余资源将会直接被拷贝，而不会经过 webpack 的处理。包括：\n"),a("ul",[a("li",[s._v("放置在 "),a("code",[s._v("public")]),s._v(" 目录；")]),s._v(" "),a("li",[s._v("通过绝对路径被引用；")]),s._v(" "),a("li",[s._v("由于历史原因，没有被 JavaScript 和 CSS 引用的图片、字体、视频等文件也会被直接拷贝。")])])])]),s._v(" "),a("p",[s._v("另外，需要注意：")]),s._v(" "),a("ul",[a("li",[s._v("HTML 中的资源路径也不会被解析，你写的是什么，它就是什么；")]),s._v(" "),a("li",[a("code",[s._v("xxx.old.js")]),s._v(" 规则的 JavaScript 文件中的资源路径也不会被解析。")])]),s._v(" "),a("h2",{attrs:{id:"从相对路径导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从相对路径导入"}},[s._v("#")]),s._v(" 从相对路径导入")]),s._v(" "),a("p",[s._v("当你在 JavaScript、CSS 中使用非绝对路径引用一个静态资源时，该资源将会被包含进入 webpack 的依赖图中。在其编译过程中，所有诸如 "),a("code",[s._v("background: url(...)")]),s._v(" 和 CSS "),a("code",[s._v("@import")]),s._v(" 的资源 URL "),a("strong",[s._v("都会被解析为一个模块依赖")]),s._v("。")]),s._v(" "),a("p",[s._v("例如，"),a("code",[s._v("url(./image.png)")]),s._v(" 会被翻译为 "),a("code",[s._v("require('./image.png')")]),s._v("。")]),s._v(" "),a("p",[s._v("在其内部，我们通过 "),a("code",[s._v("file-loader")]),s._v(" 用版本哈希值和正确的公共基础路径来决定最终的文件路径，再用 "),a("code",[s._v("url-loader")]),s._v(" 将小于 1kb 的资源内联，以减少 HTTP 请求的数量。")]),s._v(" "),a("h2",{attrs:{id:"datauri"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#datauri"}},[s._v("#")]),s._v(" datauri")]),s._v(" "),a("p",[s._v("除了 "),a("code",[s._v("url-loader")]),s._v(" 会自动将小于 1kb 的资源内联外，我们还开发了明确的指令 "),a("code",[s._v("?datauri")]),s._v("，通过该方式可以不考虑文件大小，直接实现资源内联：")]),s._v(" "),a("div",{staticClass:"language-scss extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scss"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".datauri-example ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./car.jpg?datauri"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" no-repeat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"svg-inline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#svg-inline"}},[s._v("#")]),s._v(" svg inline")]),s._v(" "),a("p",[s._v("对于 SVG 文件，我们有时候也需要获取其内容，可以通过指令 "),a("code",[s._v("?inline")]),s._v(" 做到：")]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" svgContent "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../img/postcss-assets.svg?inline'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("请思考 "),a("code",[s._v("one.svg?inline")]),s._v(" 和 "),a("code",[s._v("one.svg?datauri")]),s._v(" 的区别。")])]),s._v(" "),a("h2",{attrs:{id:"路径规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径规则"}},[s._v("#")]),s._v(" 路径规则")]),s._v(" "),a("p",[s._v("JavaScript 和 CSS 在路径上略有不同，详情请参考：")]),s._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/guide/javascript.html#路径能力"}},[s._v("JavaScript 路径能力")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/guide/css.html#路径能力"}},[s._v("CSS 路径能力")])],1)]),s._v(" "),a("p",[s._v("简单罗列如下：")]),s._v(" "),a("p",[a("code",[s._v("index.entry.js")])]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 相对路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bg1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./bg.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bg2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../img/bg.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 内嵌 Datauri")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bg3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../img/bg.png?datauri'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" svgDatauri "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../img/postcss-assets.svg?datauri'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取 SVG 内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" svgContent "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../img/postcss-assets.svg?inline'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm 依赖")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sharePic "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a-pkg-from-npm/share.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// @ 别名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" logo "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@/assets/logo.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("code",[s._v("index.scss")])]),s._v(" "),a("div",{staticClass:"language-scss extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scss"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 相对路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./base.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"base.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm 依赖")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~normalize.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// @ 别名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@/common/reset.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~@/common/reset.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".path-example ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 相对路径")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./car.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" no-repeat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"car.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" no-repeat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm 依赖")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~a-pkg-from-npm/share.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" no-repeat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// @ 别名")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~@/index/img/car.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" no-repeat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// not working")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// background: url("@/index/img/car.jpg") no-repeat;')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"public-文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#public-文件夹"}},[s._v("#")]),s._v(" "),a("code",[s._v("public")]),s._v(" 文件夹")]),s._v(" "),a("p",[s._v("任何放置在 "),a("code",[s._v("public")]),s._v(" 文件夹的静态资源都会被简单的复制，而不经过 webpack。你需要通过绝对路径来引用它们。")])])}),[],!1,null,null,null);t.default=r.exports}}]);